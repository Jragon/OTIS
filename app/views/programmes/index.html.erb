<h1>Programmes <%= @national_office ? "for " + @national_office.name : "" %></h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Number of Villages</th>
      <th>Top Change</th>
    </tr>
  </thead>

  <tbody>
    <% @programmes.each do |programme| %>
      <tr>
        <td><%= link_to programme.name, national_office_programme_path(programme.national_office, programme) %></td>
        <td><%= programme.villages.count %></td>
        <td><%= programme.top_change.respond_to?(:name) ? programme.top_change.name : "N/A" %></td>
      </tr>
    <% end %>
  </tbody>
</table>